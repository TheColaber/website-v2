<!DOCTYPE html>

<html lang="en">

<head>

<title>Addon APIs Reference - Scratch Addons</title>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<meta name="description" content="" />
<meta name="author" content="" />
<link rel="icon" href="/assets/img/icon.png">

<meta property="og:type" content="website" />
<meta property="og:url" content="https://scratchaddons.comdocs/developing/">
<meta property="og:title" content='Addon APIs Reference' />
<meta property="og:description" content="">
<meta property="og:site_name" content='Scratch Addons' />
<meta property="og:locale" content="en" />
<meta property="og:image" content="https://scratchaddons.com/assets/img/icon-square.png" />
<meta property="og:image:type" content="image/png" />
<meta property="og:image:width" content="384" />
<meta property="og:image:height" content="384" />
<meta property="og:image:alt" content='Scratch Addons logo' />

<meta name="twitter:card" content="summary" />

<meta name="twitter:url" content="https://scratchaddons.github.iodocs/developing/" />
<meta name="twitter:title" content='Addon APIs Reference - Scratch Addons' />
<meta name="twitter:description" content="" />
<meta name="twitter:image" content="https://scratchaddons.com/assets/img/icon-square.png" />
<meta name="twitter:image:alt" content='Scratch Addons logo' />




<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" crossorigin />

<link rel="stylesheet" href="/assets/css/base.css" />


<script src="https://cdn.jsdelivr.net/combine/npm/jquery@3.5.1,npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js,npm/@iconify/iconify@1.0.7,npm/bowser@2.11.0" crossorigin></script>

<script async src="/assets/js/website-base.js"></script>




</head>

<body><header>

	<nav class="navbar navbar-expand-md navbar-dark">
		
		<a href='/' class="navbar-brand">
			<img src="/assets/img/icon.svg" alt='Scratch Addons'></img>
			<span>Scratch Addons</span>
		</a>
	
		<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsible" aria-controls="collapsible" aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
	  	</button>
	
		<div class="collapse navbar-collapse" id="collapsible">
			<ul class="navbar-nav ml-md-auto">
				
				<li class="nav-item"><a class="nav-link" href='/contributors'>Contributors</a></li>
				<li class="nav-item"><a class="nav-link" href='/feedback'>Send Feedback</a></li>
				<li class="nav-item"><a class="nav-link" href='/docs'>Docs</a></li>
				<li class="nav-item"><a class="nav-link" href="https://github.com/ScratchAddons/ScratchAddons" aria-label="Repository on GitHub" rel="noopener">Repository <span class="iconify" data-icon="simple-icons:github"></span></a></li>
				<li class="nav-item" id="install-nav"><a class="nav-link install-btn ml-md-2" href='/#install'>Install</a></li>
			</ul>
		</div>
	
	</nav>
	
</header>
<link rel="stylesheet" href="/assets/css/docs/base.css" />

<div class="content container-fluid">

  

	<main class="row">

	<aside class="docs-sidebar d-flex col-lg-3 col-xl-2">
			<nav class="docs-nav" aria-label="Docs navigation">

	<ul class="docs-nav-list text-muted"><li class="docs-nav-section">
		<span><a href="/docs/" class="docs-nav-page pl-0 pr-2 active">Home</a>
		</span>
		<ul class="docs-nav-section-pages collapse show" id="docs-nav-section-pages-docs">
					<li>
						<a class="docs-nav-page" id="docs-nav-page-docschrome-web-store-privacy-information" href="/docs/chrome-web-store-privacy-information/">Chrome Web Store Privacy Information</a>
					</li><li class="docs-nav-section">
		<span><a class="collapse-button" data-toggle="collapse" href="#docs-nav-section-pages-docsdeveloping" role="button" aria-expanded="true"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 16 16"><g fill="#626262"><path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8L4.646 2.354a.5.5 0 0 1 0-.708z"/></g></svg></a> 
			<a href="/docs/developing/" class="docs-nav-page pl-0 pr-2 active">Developing</a>
		</span>
		<ul class="docs-nav-section-pages collapse show" id="docs-nav-section-pages-docsdeveloping"><li class="docs-nav-section">
		<span><a class="collapse-button collapsed" data-toggle="collapse" href="#docs-nav-section-pages-docsdevelopinggetting-started" role="button" aria-expanded="true"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 16 16"><g fill="#626262"><path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8L4.646 2.354a.5.5 0 0 1 0-.708z"/></g></svg></a> 
			<a href="/docs/developing/getting-started/" class="docs-nav-page pl-0 pr-2 collapsed">Getting Started</a>
		</span>
		<ul class="docs-nav-section-pages collapse " id="docs-nav-section-pages-docsdevelopinggetting-started">
					<li>
						<a class="docs-nav-page" id="docs-nav-page-docsdevelopinggetting-startedaddon-basics" href="/docs/developing/getting-started/addon-basics/">Addon Basics</a>
					</li>
					<li>
						<a class="docs-nav-page" id="docs-nav-page-docsdevelopinggetting-startedcreating-an-addon" href="/docs/developing/getting-started/creating-an-addon/">Creating an addon</a>
					</li>
		</ul>
	</li>
					<li>
						<a class="docs-nav-page" id="docs-nav-page-docsdevelopingabout-persistent-scripts" href="/docs/developing/about-persistent-scripts/">About Persistant Scripts</a>
					</li>
					<li>
						<a class="docs-nav-page" id="docs-nav-page-docsdevelopingabout-userscripts" href="/docs/developing/about-userscripts/">About Userscripts</a>
					</li>
					<li>
						<a class="docs-nav-page" id="docs-nav-page-docsdevelopingabout-userstyles" href="/docs/developing/about-userstyles/">About Userstyles</a>
					</li>
					<li>
						<a class="docs-nav-page active" id="docs-nav-page-docsdevelopingaddon-apis-reference" href="/docs/developing/addon-apis-reference/">Addon APIs Reference</a>
					</li>
					<li>
						<a class="docs-nav-page" id="docs-nav-page-docsdevelopingaddontabtraps" href="/docs/developing/addon.tab.traps/">addon.tab.traps</a>
					</li>
					<li>
						<a class="docs-nav-page" id="docs-nav-page-docsdevelopingdesign" href="/docs/developing/design/">Design</a>
					</li>
					<li>
						<a class="docs-nav-page" id="docs-nav-page-docsdevelopinghow-to-add-an-icon-to-a-setting-name" href="/docs/developing/how-to-add-an-icon-to-a-setting-name/">How to add an icon to a setting name</a>
					</li>
					<li>
						<a class="docs-nav-page" id="docs-nav-page-docsdevelopinginstalling-scratch-addons" href="/docs/developing/installing-scratch-addons/">Installing Scratch Addons</a>
					</li>
					<li>
						<a class="docs-nav-page" id="docs-nav-page-docsdevelopingredux" href="/docs/developing/redux/">Redux</a>
					</li>
					<li>
						<a class="docs-nav-page" id="docs-nav-page-docsdevelopingthe-addon-manifest-addonjson" href="/docs/developing/the-addon-manifest-addon.json/">The addon manifest (addon.json)</a>
					</li>
		</ul>
	</li><li class="docs-nav-section">
		<span><a class="collapse-button collapsed" data-toggle="collapse" href="#docs-nav-section-pages-docslocalization" role="button" aria-expanded="true"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 16 16"><g fill="#626262"><path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8L4.646 2.354a.5.5 0 0 1 0-.708z"/></g></svg></a> 
			<a href="/docs/localization/" class="docs-nav-page pl-0 pr-2 collapsed">Localization</a>
		</span>
		<ul class="docs-nav-section-pages collapse " id="docs-nav-section-pages-docslocalization">
					<li>
						<a class="docs-nav-page" id="docs-nav-page-docslocalizationhow-to-join-the-localization-team" href="/docs/localization/how-to-join-the-localization-team/">How to join the localization team</a>
					</li>
					<li>
						<a class="docs-nav-page" id="docs-nav-page-docslocalizationlocalizing-addons" href="/docs/localization/localizing-addons/">Localizing Addons</a>
					</li>
		</ul>
	</li>
		</ul>
	</li></ul>

</nav></aside>
	
		<article class="docs-main col col-lg-9 col-xl-8">

			<h1>Addon APIs Reference</h1>
			<p>This API can be used within your addons, which can provide useful things such as access to the real blockly, Scratch&rsquo;s vm, etc.</p>
<h2 id="table-of-contents">Table of contents <a href="#table-of-contents" class="anchor" aria-label="Anchor"></a></h2><ul>
<li><a href="#addonself"><code>addon.self</code></a>
<ul>
<li><a href="#getters"><code>Getters</code></a></li>
<li><a href="#events"><code>Events</code></a></li>
</ul>
</li>
<li><a href="#addonsettings"><code>addon.settings</code></a>
<ul>
<li><a href="#functions"><code>Functions</code></a></li>
<li><a href="#events-1"><code>Events</code></a></li>
</ul>
</li>
<li><a href="#addonauth"><code>addon.auth</code></a>
<ul>
<li><a href="#getters-1"><code>Getters</code></a></li>
<li><a href="#events-2"><code>Events</code></a></li>
</ul>
</li>
<li><a href="#addonaccount"><code>addon.account</code></a>
<ul>
<li><a href="#functions-1"><code>Functions</code></a></li>
</ul>
</li>
<li><a href="#addontab"><code>addon.tab</code></a>
<ul>
<li><a href="#sub-apis"><code>Sub-APIs</code></a></li>
<li><a href="#getters-2"><code>Getters</code></a></li>
<li><a href="#functions-2"><code>Functions</code></a></li>
<li><a href="#events-3"><code>Events</code></a></li>
</ul>
</li>
<li><a href="#addonnotifications"><code>addon.notifications</code></a>
<ul>
<li><a href="#functions-3"><code>Functions</code></a></li>
<li><a href="#events-4"><code>Events</code></a></li>
</ul>
</li>
<li><a href="#addonbadge"><code>addon.badge</code></a>
<ul>
<li><a href="#getters--setters"><code>Getters &amp; setters</code></a></li>
</ul>
</li>
</ul>
<h2 id="addonself">addon.self <a href="#addonself" class="anchor" aria-label="Anchor"></a></h2><p><strong>Available in persistent scripts.</strong><br>
<strong>Available in userscripts.</strong></p>
<p>Allows addons to get information about themselves or the browser.</p>
<h3 id="getters">Getters <a href="#getters" class="anchor" aria-label="Anchor"></a></h3><h4 id="addonselfid-string">addon.self.id (string) <a href="#addonselfid-string" class="anchor" aria-label="Anchor"></a></h4><p>The ID of the addon, in other words, the name of the folder.</p>
<h4 id="addonselfdir-string">addon.self.dir (string) <a href="#addonselfdir-string" class="anchor" aria-label="Anchor"></a></h4><p>The directory where the addon resides.</p>
<h4 id="addonselfbrowser-string">addon.self.browser (string) <a href="#addonselfbrowser-string" class="anchor" aria-label="Anchor"></a></h4><p>Returns either <code>chrome</code> or <code>firefox</code>, depending on the browser Scratch Addons is running at.</p>
<h4 id="addonselfenabledlate-boolean">addon.self.enabledLate (boolean) <a href="#addonselfenabledlate-boolean" class="anchor" aria-label="Anchor"></a></h4><p>Returns true if the addon was dynamically enabled. Otherwise, false.</p>
<h3 id="events">Events <a href="#events" class="anchor" aria-label="Anchor"></a></h3><h4 id="disabled">disabled <a href="#disabled" class="anchor" aria-label="Anchor"></a></h4><p>Fires when the addon gets disabled and has the <code>dynamicDisable</code> manifest property</p>
<h4 id="reenabled">reenabled <a href="#reenabled" class="anchor" aria-label="Anchor"></a></h4><p>Fires when the addon gets reenabled after being disabled.</p>
<h2 id="addonsettings">addon.settings <a href="#addonsettings" class="anchor" aria-label="Anchor"></a></h2><p><strong>Available in persistent scripts.</strong><br>
<strong>Available in userscripts.</strong></p>
<p>Allows addons to change their behavior according to user-specified addon settings.<br>
This API is available even if an addon doesn&rsquo;t specify <code>options</code> in its manifest, however all calls to <code>get()</code> will fail.</p>
<h3 id="functions">Functions <a href="#functions" class="anchor" aria-label="Anchor"></a></h3><h4 id="addonsettingsgetoptionidstring">addon.settings.get(optionIdString) <a href="#addonsettingsgetoptionidstring" class="anchor" aria-label="Anchor"></a></h4><p>Returns the user-specified value for that option, or the default specified in the addon manifest if the user didn&rsquo;t specify a value by themselves.<br>
Throws if the specified option ID wasn&rsquo;t declared inside <code>addon.json</code>.</p>
<h3 id="events-1">Events <a href="#events-1" class="anchor" aria-label="Anchor"></a></h3><h4 id="change">change <a href="#change" class="anchor" aria-label="Anchor"></a></h4><p>Fires when any of the addon&rsquo;s settings have changed. This is a good time to restart your addon, refresh the page, recalculate settings, etc.</p>
<h5 id="example">Example: <a href="#example" class="anchor" aria-label="Anchor"></a></h5><div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">addon</span><span class="p">.</span><span class="nx">settings</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&#34;change&#34;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;Settings changed!&#34;</span><span class="p">);</span>
  <span class="k">if</span><span class="p">(</span><span class="nx">addon</span><span class="p">.</span><span class="nx">settings</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&#34;removeIdeasBtn&#34;</span><span class="p">)</span> <span class="o">===</span> <span class="kc">true</span> <span class="o">&amp;&amp;</span> <span class="nx">tipsButtonShown</span> <span class="o">===</span> <span class="kc">false</span><span class="p">)</span> <span class="nx">showTipsButton</span><span class="p">();</span>
  <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">addon</span><span class="p">.</span><span class="nx">settings</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&#34;removeIdeasBtn&#34;</span><span class="p">)</span> <span class="o">===</span> <span class="kc">false</span> <span class="o">&amp;&amp;</span> <span class="nx">tipsButtonShown</span> <span class="o">===</span> <span class="kc">true</span><span class="p">)</span> <span class="nx">hideTipsButton</span><span class="p">();</span>
<span class="p">});</span>
</code></pre></div><h2 id="addonauth">addon.auth <a href="#addonauth" class="anchor" aria-label="Anchor"></a></h2><p><strong>Available in persistent scripts.</strong><br>
<strong>Available in userscripts.</strong></p>
<p>Allows addons to get information about the current Scratch account session.</p>
<h3 id="getters-1">Getters <a href="#getters-1" class="anchor" aria-label="Anchor"></a></h3><h4 id="addonauthscratchlang-string">addon.auth.scratchLang (string) <a href="#addonauthscratchlang-string" class="anchor" aria-label="Anchor"></a></h4><p>Returns the language code for the language choice the user has made in Scratch, for example. <code>&quot;en&quot;</code>.<br>
Keep in mind that this property is unrelated from all the others - this getter is inside <code>addon.auth</code> because it involves reading Scratch cookies. The change of this value <strong>will not</strong> trigger a &ldquo;change&rdquo; event.</p>
<h4 id="addonauthisloggedin-boolean">addon.auth.isLoggedIn (boolean) <a href="#addonauthisloggedin-boolean" class="anchor" aria-label="Anchor"></a></h4><p>Returns whether the user is logged in or not. If <code>false</code>, all below return <code>null</code>.</p>
<h4 id="addonauthusername-string">addon.auth.username (string) <a href="#addonauthusername-string" class="anchor" aria-label="Anchor"></a></h4><p>Returns the username of the currently logged in user.</p>
<h4 id="addonauthuserid-string">addon.auth.userId (string) <a href="#addonauthuserid-string" class="anchor" aria-label="Anchor"></a></h4><p>Returns the user ID of the currently logged in user.</p>
<h4 id="addonauthxtoken-string">addon.auth.xToken (string) <a href="#addonauthxtoken-string" class="anchor" aria-label="Anchor"></a></h4><p>Returns the value of the <code>X-Token</code> header used in the Scratch REST API.</p>
<h4 id="addonauthcsrftoken-string">addon.auth.csrfToken (string) <a href="#addonauthcsrftoken-string" class="anchor" aria-label="Anchor"></a></h4><p>Returns the value of the <code>scratchcsrftoken</code> cookie.</p>
<h3 id="events-2">Events <a href="#events-2" class="anchor" aria-label="Anchor"></a></h3><h4 id="change-1">change <a href="#change-1" class="anchor" aria-label="Anchor"></a></h4><p>Fires when any of the getters change (except scratchLang).</p>
<h5 id="example-1">Example: <a href="#example-1" class="anchor" aria-label="Anchor"></a></h5><div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">addon</span><span class="p">.</span><span class="nx">auth</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&#34;change&#34;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">addon</span><span class="p">.</span><span class="nx">auth</span><span class="p">.</span><span class="nx">isLoggedIn</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div><h2 id="addonaccount">addon.account <a href="#addonaccount" class="anchor" aria-label="Anchor"></a></h2><p><strong>Available in persistent scripts.</strong><br>
<strong>Available in userscripts.</strong></p>
<p>Allows addons to execute actions in the currently logged in Scratch user.</p>
<h3 id="functions-1">Functions <a href="#functions-1" class="anchor" aria-label="Anchor"></a></h3><h4 id="getmsgcount">getMsgCount() <a href="#getmsgcount" class="anchor" aria-label="Anchor"></a></h4><p>Returns a promise that resolves to an integer (the unread message count for the currently logged in user), or <code>null</code>.</p>
<h4 id="getmessagesopts">getMessages(opts) <a href="#getmessagesopts" class="anchor" aria-label="Anchor"></a></h4><p><strong>NOT available in userscripts!! Not recommended for general use. This method exists to avoid duplicated work between Scratch Notifier and Scratch Messaging.</strong><br>
<code>opts</code>: object with an <code>offset</code> property, default is 0. Messages limit is always 40.<br>
Returns a promise that resolves to the requested messages, or <code>null</code> if something failed.</p>
<h2 id="addontab">addon.tab <a href="#addontab" class="anchor" aria-label="Anchor"></a></h2><p><strong>NOT available in persistent scripts.</strong><br>
<strong>Available in userscripts.</strong></p>
<p>Allows addon userscripts to get information about the tab they&rsquo;re currently running on.</p>
<h3 id="sub-apis">Sub-APIs <a href="#sub-apis" class="anchor" aria-label="Anchor"></a></h3><h4 id="addontabtrapsdocsdevelopingaddontabtraps"><a href="/docs/developing/addon.tab.traps">addon.tab.traps</a> <a href="#addontabtrapsdocsdevelopingaddontabtraps" class="anchor" aria-label="Anchor"></a></h4><p>Allows addons to get direct references to objects, which are particularly useful for enhancing the editor, like the Scratch VM, Thread objects, or Redux state on scratch-www pages.</p>
<h3 id="getters-2">Getters <a href="#getters-2" class="anchor" aria-label="Anchor"></a></h3><h4 id="addontabclientversion">addon.tab.clientVersion <a href="#addontabclientversion" class="anchor" aria-label="Anchor"></a></h4><p>Currently, the Scratch community website has 2 working clients used throughout the site, one React based and another jQuery based. This getter allows addons to change your behavior depending on the version of the current page.<br>
Returns either <code>&quot;scratch-www&quot;</code> (React based), <code>&quot;scratchr2&quot;</code> (jQuery based) or <code>null</code>.</p>
<h4 id="addontabeditormode">addon.tab.editorMode <a href="#addontabeditormode" class="anchor" aria-label="Anchor"></a></h4><p>If the tab is a project, it returns the viewing mode of the project: <code>&quot;editor&quot;</code>, <code>&quot;fullscreen&quot;</code> or <code>&quot;embed&quot;</code>.<br>
If not in a project, it will return <code>null</code>.</p>
<h3 id="functions-2">Functions <a href="#functions-2" class="anchor" aria-label="Anchor"></a></h3><h4 id="addontabwaitforelementselector-optionaloptionsobject">addon.tab.waitForElement(selector, optionalOptionsObject) <a href="#addontabwaitforelementselector-optionaloptionsobject" class="anchor" aria-label="Anchor"></a></h4><p><strong>Since v1.4.0, this function does not react to attribute changes in the DOM. Please do not use this to react to attribute changes. You can still, however, match static attributes that stay the same since the element is created, until it is destroyed.</strong><br>
Returns a promise that resolves to the found element when an element matching that selector is found.<br>
If the element already exists, it automatically resolves.<br>
Takes the same argument as <code>document.querySelectorAll</code>.<br>
If the options object includes <code>{markAsSeen: true}</code>, the returned element will be marked as seen by the addon, and will be ignored for any future calls to <code>waitForElement()</code>, no matter the selector or options object given to it. This is useful for cases where you only want to do an operation once per element.</p>
<h4 id="addontabdisplaynonewhiledisabledel-optionaloptionsobject">addon.tab.displayNoneWhileDisabled(el, optionalOptionsObject) <a href="#addontabdisplaynonewhiledisabledel-optionaloptionsobject" class="anchor" aria-label="Anchor"></a></h4><p>Hides the given element with <code>display: none</code> when the addon is disabled. If the addon is enabled, it will set the display of the element to options.display which defaults as &ldquo;&rdquo;.</p>
<h3 id="events-3">Events <a href="#events-3" class="anchor" aria-label="Anchor"></a></h3><h4 id="urlchange">urlChange <a href="#urlchange" class="anchor" aria-label="Anchor"></a></h4><p>Fires when Scratch dynamically changes the URL of the page. This usually happens when going inside/outside the editor, or into/outside full screen mode. This event does not trigger if the hash of the URL changes.<br>
You can access <code>event.detail.oldUrl</code> and <code>event.detail.newUrl</code></p>
<h5 id="example-2">Example: <a href="#example-2" class="anchor" aria-label="Anchor"></a></h5><div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">addon</span><span class="p">.</span><span class="nx">tab</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&#34;urlChange&#34;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`URL changed! It was previously </span><span class="si">${</span><span class="nx">event</span><span class="p">.</span><span class="nx">detail</span><span class="p">.</span><span class="nx">oldUrl</span><span class="si">}</span><span class="sb">, it&#39;s now </span><span class="si">${</span><span class="nx">event</span><span class="p">.</span><span class="nx">detail</span><span class="p">.</span><span class="nx">newUrl</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div><h2 id="addonnotifications">addon.notifications <a href="#addonnotifications" class="anchor" aria-label="Anchor"></a></h2><p><strong>Available in persistent scripts.</strong><br>
<strong>NOT available in userscripts.</strong><br>
<strong>Required permissions: <code>notifications</code></strong></p>
<p>Allows addons to create browser notifications. This API slightly differs from the <code>browser.notifications</code> API extensions can use.</p>
<h3 id="functions-3">Functions <a href="#functions-3" class="anchor" aria-label="Anchor"></a></h3><h4 id="addonnotificationscreateoptionsobject">addon.notifications.create(optionsObject) <a href="#addonnotificationscreateoptionsobject" class="anchor" aria-label="Anchor"></a></h4><p>Returns a promise that resolves to the ID (string) of the created notification.<br>
Shows a notification to the user according to the options object.<br>
<a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/notifications/NotificationOptions">Options object reference</a>.<br>
Note: for your convenience, neither specifying <code>buttons</code> and <code>requireInteraction</code> throws on Firefox.</p>
<h4 id="addonnotificationsupdatestringnotificationid-optionsobject">addon.notifications.update(stringNotificationId, optionsObject) <a href="#addonnotificationsupdatestringnotificationid-optionsobject" class="anchor" aria-label="Anchor"></a></h4><p>Returns a promise that resolves to <code>true</code> if succeeded, <code>false</code> if not.<br>
Updates a notification, given its ID.</p>
<h4 id="addonnotificationsclearstringnotificationid">addon.notifications.clear(stringNotificationId) <a href="#addonnotificationsclearstringnotificationid" class="anchor" aria-label="Anchor"></a></h4><p>Returns a promise that resolves to <code>true</code> if succeeded, <code>false</code> if not.<br>
Clears a notification, given its ID.</p>
<h4 id="addonnotificationsgetall">addon.notifications.getAll() <a href="#addonnotificationsgetall" class="anchor" aria-label="Anchor"></a></h4><p>Returns a promise that resolves to all currently active notifications created by the addon.</p>
<h3 id="events-4">Events <a href="#events-4" class="anchor" aria-label="Anchor"></a></h3><h4 id="click">click <a href="#click" class="anchor" aria-label="Anchor"></a></h4><p>Fires when any notification by the addon is clicked.<br>
<code>event.detail.id</code> is provided, which specifies which notification has been clicked.</p>
<h5 id="example-3">Example: <a href="#example-3" class="anchor" aria-label="Anchor"></a></h5><div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">addon</span><span class="p">.</span><span class="nx">notifications</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&#34;click&#34;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;User clicked notification with ID &#34;</span> <span class="o">+</span> <span class="nx">event</span><span class="p">.</span><span class="nx">detail</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div><h4 id="close">close <a href="#close" class="anchor" aria-label="Anchor"></a></h4><p>Fires when any notification by the addon is clicked.<br>
<code>event.detail.id</code> is provided, which specifies which notification has been closed.</p>
<h4 id="buttonclick">buttonclick <a href="#buttonclick" class="anchor" aria-label="Anchor"></a></h4><p>Fires when a button inside a notification by the addon is clicked.<br>
<code>event.detail.id</code> is provided, which specifies which notification received a button click.<br>
<code>event.details.buttonIndex</code> returns the index of the button that was clicked (first button has index of 0).<br>
Registering this event on Firefox won&rsquo;t throw.</p>
<h2 id="addonbadge">addon.badge <a href="#addonbadge" class="anchor" aria-label="Anchor"></a></h2><h4 id="keep-in-mind-as-of-august-31st-only-one-addon-can-use-the-badge-api-currently-msg-count-badge">Keep in mind: as of August 31st, only one addon can use the badge API, currently <code>msg-count-badge</code> <a href="#keep-in-mind-as-of-august-31st-only-one-addon-can-use-the-badge-api-currently-msg-count-badge" class="anchor" aria-label="Anchor"></a></h4><p><strong>Available in persistent scripts.</strong><br>
<strong>NOT available in userscripts.</strong><br>
<strong>Required permissions: <code>badge</code></strong></p>
<p>Allows addons to display a badge, a bit of text that is layered over the extension icon, frequently a number.</p>
<h3 id="getters--setters">Getters &amp; setters <a href="#getters--setters" class="anchor" aria-label="Anchor"></a></h3><h4 id="addonbadgetext">addon.badge.text <a href="#addonbadgetext" class="anchor" aria-label="Anchor"></a></h4><p>Allows addons to set the text on the badge.<br>
Accepts numbers, which are automatically converted to strings.<br>
<code>null</code> and <code>0</code> are considered as empty strings.<br>
If the badge is set to an empty string, it won&rsquo;t be displayed.</p>
<h4 id="addonbadgecolor">addon.badge.color <a href="#addonbadgecolor" class="anchor" aria-label="Anchor"></a></h4><p>Allows addons to set the color of the badge.
Accepts any CSS supported color.</p>
	

		</article>

		<aside class="docs-toc text-muted d-none d-xl-flex col-xl-2"> 
			
			<nav id="TableOfContents">
  <ul>
    <li><a href="#table-of-contents">Table of contents</a></li>
    <li><a href="#addonself">addon.self</a>
      <ul>
        <li><a href="#getters">Getters</a>
          <ul>
            <li><a href="#addonselfid-string">addon.self.id (string)</a></li>
            <li><a href="#addonselfdir-string">addon.self.dir (string)</a></li>
            <li><a href="#addonselfbrowser-string">addon.self.browser (string)</a></li>
            <li><a href="#addonselfenabledlate-boolean">addon.self.enabledLate (boolean)</a></li>
          </ul>
        </li>
        <li><a href="#events">Events</a>
          <ul>
            <li><a href="#disabled">disabled</a></li>
            <li><a href="#reenabled">reenabled</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#addonsettings">addon.settings</a>
      <ul>
        <li><a href="#functions">Functions</a>
          <ul>
            <li><a href="#addonsettingsgetoptionidstring">addon.settings.get(optionIdString)</a></li>
          </ul>
        </li>
        <li><a href="#events-1">Events</a>
          <ul>
            <li><a href="#change">change</a>
              <ul>
                <li><a href="#example">Example:</a></li>
              </ul>
            </li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#addonauth">addon.auth</a>
      <ul>
        <li><a href="#getters-1">Getters</a>
          <ul>
            <li><a href="#addonauthscratchlang-string">addon.auth.scratchLang (string)</a></li>
            <li><a href="#addonauthisloggedin-boolean">addon.auth.isLoggedIn (boolean)</a></li>
            <li><a href="#addonauthusername-string">addon.auth.username (string)</a></li>
            <li><a href="#addonauthuserid-string">addon.auth.userId (string)</a></li>
            <li><a href="#addonauthxtoken-string">addon.auth.xToken (string)</a></li>
            <li><a href="#addonauthcsrftoken-string">addon.auth.csrfToken (string)</a></li>
          </ul>
        </li>
        <li><a href="#events-2">Events</a>
          <ul>
            <li><a href="#change-1">change</a>
              <ul>
                <li><a href="#example-1">Example:</a></li>
              </ul>
            </li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#addonaccount">addon.account</a>
      <ul>
        <li><a href="#functions-1">Functions</a>
          <ul>
            <li><a href="#getmsgcount">getMsgCount()</a></li>
            <li><a href="#getmessagesopts">getMessages(opts)</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#addontab">addon.tab</a>
      <ul>
        <li><a href="#sub-apis">Sub-APIs</a>
          <ul>
            <li><a href="#addontabtrapsdocsdevelopingaddontabtraps"><a href="/docs/developing/addon.tab.traps">addon.tab.traps</a></a></li>
          </ul>
        </li>
        <li><a href="#getters-2">Getters</a>
          <ul>
            <li><a href="#addontabclientversion">addon.tab.clientVersion</a></li>
            <li><a href="#addontabeditormode">addon.tab.editorMode</a></li>
          </ul>
        </li>
        <li><a href="#functions-2">Functions</a>
          <ul>
            <li><a href="#addontabwaitforelementselector-optionaloptionsobject">addon.tab.waitForElement(selector, optionalOptionsObject)</a></li>
            <li><a href="#addontabdisplaynonewhiledisabledel-optionaloptionsobject">addon.tab.displayNoneWhileDisabled(el, optionalOptionsObject)</a></li>
          </ul>
        </li>
        <li><a href="#events-3">Events</a>
          <ul>
            <li><a href="#urlchange">urlChange</a>
              <ul>
                <li><a href="#example-2">Example:</a></li>
              </ul>
            </li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#addonnotifications">addon.notifications</a>
      <ul>
        <li><a href="#functions-3">Functions</a>
          <ul>
            <li><a href="#addonnotificationscreateoptionsobject">addon.notifications.create(optionsObject)</a></li>
            <li><a href="#addonnotificationsupdatestringnotificationid-optionsobject">addon.notifications.update(stringNotificationId, optionsObject)</a></li>
            <li><a href="#addonnotificationsclearstringnotificationid">addon.notifications.clear(stringNotificationId)</a></li>
            <li><a href="#addonnotificationsgetall">addon.notifications.getAll()</a></li>
          </ul>
        </li>
        <li><a href="#events-4">Events</a>
          <ul>
            <li><a href="#click">click</a>
              <ul>
                <li><a href="#example-3">Example:</a></li>
              </ul>
            </li>
            <li><a href="#close">close</a></li>
            <li><a href="#buttonclick">buttonclick</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#addonbadge">addon.badge</a>
      <ul>
        <li>
          <ul>
            <li><a href="#keep-in-mind-as-of-august-31st-only-one-addon-can-use-the-badge-api-currently-msg-count-badge">Keep in mind: as of August 31st, only one addon can use the badge API, currently <code>msg-count-badge</code></a></li>
          </ul>
        </li>
        <li><a href="#getters--setters">Getters &amp; setters</a>
          <ul>
            <li><a href="#addonbadgetext">addon.badge.text</a></li>
            <li><a href="#addonbadgecolor">addon.badge.color</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>
		</aside>

	</main>


    
</div><a id="dark-toggle" class="btn" title='Click to toggle the dark theme.' aria-label='Dark theme switch button' data-toggle="tooltip" data-placement="left"></a>

<footer class="footer">
	<div class="container">
		<section class="footer-intro">
			<a href='/' class="navbar-brand mb-3">
				<img src="/assets/img/icon.svg" alt='Scratch Addons' class="mr-2"></img>
				<span>Scratch Addons</span>
			</a>
			<iframe src="https://ghbtns.com/github-btn.html?user=ScratchAddons&repo=ScratchAddons&type=star&count=true&size=large" frameborder="0" scrolling="0" width="170" height="30" title="GitHub"></iframe>
			<iframe src="https://ghbtns.com/github-btn.html?user=ScratchAddons&repo=ScratchAddons&type=fork&count=true&size=large" frameborder="0" scrolling="0" width="170" height="30" title="GitHub"></iframe>
		</section>
		<section>
			<h3>Header</h3>
			<a href='/faq'>FAQ</a>
			<a href='/feedback'>Send Feedback</a>
			<a href='/contributors'>Contributors</a>		
			<a href='/changelog'>Changelog</a>
			<a href='/addons'>Addons</a>
		</section>
		<section>
			<h3>Discuss</h3>
			<a href="https://github.com/ScratchAddons/ScratchAddons/discussions" rel="noopener"></a>
			<a href="https://github.com/ScratchAddons/ScratchAddons/issues" rel="noopener">Issues</a>
			<a href="https://discord.gg/R5NBqwMjNc" rel="noopener">Community Discord</a>
			<a href="https://discord.gg/Ak8sCDQ" rel="noopener">Development Discord</a>
		</section>
		<section>
			<h3>Resources</h3>
			<a href="https://github.com/ScratchAddons" rel="noopener">Organization</a>
			<a href="https://github.com/ScratchAddons/ScratchAddons" rel="noopener">Repository</a>
			<a href="https://github.com/ScratchAddons/ScratchAddons/wiki" rel="noopener">Documentation</a>
		</section>
		<section class="w-100 mt-3">
			<p>© 2021 Scratch Addons contributors</p>
			<p>Scratch Addons is not affiliated, associated, or in any way officially connected with Scratch, the Scratch Team, the Scratch Foundation, or any of its subsidiaries or its affiliates.</p>
			<p>Scratch Addons is licensed under the terms of GNU General Public License v3.0.</p>
		</section>
	</div>
</footer></body>

</html>
